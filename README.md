# Live Channels - Glance Extension# LiveChannelsCN

A

ä¸€ä¸ªç”¨äº Glance çš„ç›´æ’­çŠ¶æ€ç»„ä»¶ï¼Œæ”¯æŒæŸ¥çœ‹å¤šä¸ªç›´æ’­å¹³å°ä¸»æ’­çš„å®æ—¶å¼€æ’­çŠ¶æ€ã€‚

## ğŸ“‹ åŠŸèƒ½ç‰¹æ€§

-   âœ… æ”¯æŒå¤šä¸ªç›´æ’­å¹³å°ï¼šB ç«™ (Bilibili)ã€æ–—é±¼ (Douyu)ã€è™ç‰™ (Huya)
-   âœ… å®æ—¶ç›´æ’­çŠ¶æ€æŸ¥è¯¢
-   âœ… JSON é…ç½®æ–‡ä»¶æ”¯æŒ
-   âœ… å“åº”å¼è®¾è®¡ï¼Œä¸ Glance Twitch ç»„ä»¶é£æ ¼ä¸€è‡´
-   âœ… å¹¶å‘è¯·æ±‚ä¼˜åŒ–ï¼Œå¿«é€Ÿå“åº”
-   âœ… RESTful API æ¥å£

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

-   Go 1.21 æˆ–æ›´é«˜ç‰ˆæœ¬
-   ç½‘ç»œè¿æ¥ï¼ˆç”¨äºè°ƒç”¨ç›´æ’­å¹³å° APIï¼‰

### å®‰è£…å’Œè¿è¡Œ

1. **å…‹éš†æˆ–åˆå§‹åŒ–é¡¹ç›®**

```bash
cd f:\code\LiveChannelsCN
go mod download
```

2. **é…ç½®é¢‘é“ä¿¡æ¯**

ç¼–è¾‘ `config.json` æ–‡ä»¶ï¼Œæ·»åŠ ä½ è¦ç›‘è§†çš„ä¸»æ’­ä¿¡æ¯ï¼š

```json
{
	"channels": [
		{
			"platform": "bilibili",
			"channel_id": "12345",
			"name": "ä¸»æ’­æ˜µç§°"
		},
		{
			"platform": "douyu",
			"channel_id": "67890",
			"name": "æ–—é±¼ä¸»æ’­"
		},
		{
			"platform": "huya",
			"channel_id": "11111",
			"name": "è™ç‰™ä¸»æ’­"
		}
	]
}
```

**Platform æ”¯æŒçš„å€¼ï¼š**

-   `bilibili` - B ç«™
-   `douyu` - æ–—é±¼
-   `huya` - è™ç‰™

3. **è¿è¡ŒæœåŠ¡**

```bash
go run main.go
```

æœåŠ¡å°†åœ¨ `http://localhost:8080` å¯åŠ¨ã€‚

## ğŸ“¡ API ç«¯ç‚¹

### è·å–æ‰€æœ‰ç›´æ’­çŠ¶æ€

```
GET /api/streams
```

**å“åº”ç¤ºä¾‹ï¼š**

```json
{
	"status": "success",
	"data": [
		{
			"channel_id": "12345",
			"name": "ä¸»æ’­æ˜µç§°",
			"platform": "bilibili",
			"is_live": true,
			"title": "ç›´æ’­æ ‡é¢˜",
			"game": "",
			"viewers": 12345,
			"thumbnail_url": "https://...",
			"profile_url": "https://space.bilibili.com/12345",
			"updated_at": 1700000000
		}
	]
}
```

### è·å–æŒ‡å®šå¹³å°çš„ç›´æ’­çŠ¶æ€

```
GET /api/streams/:platform
```

**å‚æ•°ï¼š**

-   `platform` - ç›´æ’­å¹³å° (bilibili | douyu | huya)

**ç¤ºä¾‹ï¼š**

```bash
curl http://localhost:8080/api/streams/bilibili
```

### å¥åº·æ£€æŸ¥

```
GET /health
```

## ğŸ¨ å‰ç«¯ç»„ä»¶

è®¿é—® `http://localhost:8080` æ‰“å¼€ç½‘é¡µç•Œé¢ï¼ŒæŸ¥çœ‹ç›´æ’­çŠ¶æ€ã€‚

### æ ·å¼ç‰¹æ€§

-   å¡ç‰‡å¼å¸ƒå±€ï¼Œä¸ Glance Twitch ç»„ä»¶ä¿æŒä¸€è‡´
-   å®æ—¶ç›´æ’­æŒ‡ç¤ºï¼ˆçº¢è‰²é—ªçƒ LEDï¼‰
-   æ˜¾ç¤ºè§‚çœ‹äººæ•°ï¼ˆè‡ªåŠ¨å•ä½æ¢ç®—ï¼‰
-   æ”¯æŒç‚¹å‡»å¡ç‰‡æ‰“å¼€ä¸»æ’­ä¸ªäººé¡µé¢
-   è‡ªåŠ¨æ¯ 30 ç§’åˆ·æ–°ä¸€æ¬¡æ•°æ®
-   æ”¯æŒç¦»çº¿çŠ¶æ€æ˜¾ç¤º

## ğŸ“ é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ main.go                          # ç¨‹åºå…¥å£
â”œâ”€â”€ go.mod                           # Go æ¨¡å—æ–‡ä»¶
â”œâ”€â”€ go.sum                           # Go ä¾èµ–é”æ–‡ä»¶
â”œâ”€â”€ config.json                      # é…ç½®æ–‡ä»¶
â”œâ”€â”€ web/
â”‚   â””â”€â”€ index.html                   # å‰ç«¯é¡µé¢
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â””â”€â”€ models.go                # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ config.go                # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ platform/
â”‚   â”‚   â”œâ”€â”€ factory.go               # å¹³å°å·¥å‚
â”‚   â”‚   â”œâ”€â”€ bilibili.go              # B ç«™ API å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ douyu.go                 # æ–—é±¼ API å®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ huya.go                  # è™ç‰™ API å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ service/
â”‚   â”‚   â””â”€â”€ stream_service.go        # ç›´æ’­æœåŠ¡
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ router.go                # API è·¯ç”±
â””â”€â”€ README.md                        # é¡¹ç›®è¯´æ˜æ–‡ä»¶
```

## ğŸ”§ é…ç½®è¯´æ˜

### channel_id è·å–æ–¹å¼

**B ç«™ï¼š**

-   è¿›å…¥ä¸»æ’­ä¸ªäººç©ºé—´
-   URL ä¸º `https://space.bilibili.com/{uid}`ï¼Œå…¶ä¸­ `{uid}` å°±æ˜¯ channel_id

**æ–—é±¼ï¼š**

-   è¿›å…¥ç›´æ’­é—´
-   URL ä¸º `https://www.douyu.com/{room_id}`ï¼Œå…¶ä¸­ `{room_id}` å°±æ˜¯ channel_id

**è™ç‰™ï¼š**

-   è¿›å…¥ç›´æ’­é—´
-   URL ä¸º `https://www.huya.com/{room_id}`ï¼Œå…¶ä¸­ `{room_id}` å°±æ˜¯ channel_id

## âš™ï¸ æ„å»ºå’Œéƒ¨ç½²

### æ„å»ºå¯æ‰§è¡Œæ–‡ä»¶

```bash
go build -o live-channels.exe
```

### åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œ

```bash
# Windows
live-channels.exe

# Linux/Mac
./live-channels
```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **API é¢‘ç‡é™åˆ¶**ï¼šè¯·æ³¨æ„å„å¹³å°çš„ API é¢‘ç‡é™åˆ¶ï¼Œé¿å…è¿‡äºé¢‘ç¹çš„è¯·æ±‚
2. **è·¨åŸŸé—®é¢˜**ï¼šå¦‚æœåœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼Œéœ€è¦é…ç½® CORSï¼ˆå¯æŒ‰éœ€æ·»åŠ ï¼‰
3. **ç¼“å­˜å»ºè®®**ï¼šä¸ºå‡å°‘ API è°ƒç”¨ï¼Œå¯ä»¥åœ¨å‰ç«¯å®ç°æ•°æ®ç¼“å­˜æœºåˆ¶

## ğŸ› æ•…éšœæ’é™¤

### æ— æ³•è·å–ç›´æ’­çŠ¶æ€

-   æ£€æŸ¥ç½‘ç»œè¿æ¥
-   éªŒè¯ `channel_id` æ˜¯å¦æ­£ç¡®
-   æŸ¥çœ‹æ˜¯å¦è§¦å‘å¹³å° API é¢‘ç‡é™åˆ¶

### 404 é”™è¯¯

-   ç¡®ä¿æœåŠ¡å·²å¯åŠ¨
-   æ£€æŸ¥ API ç«¯ç‚¹æ‹¼å†™æ˜¯å¦æ­£ç¡®
-   ç¡®è®¤é…ç½®æ–‡ä»¶å­˜åœ¨ä¸”æ ¼å¼æ­£ç¡®

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“§ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œæ¬¢è¿æäº¤ Issueã€‚
